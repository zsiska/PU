
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Restaurant Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5e79e;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #d4af37;
      padding: 10px;
      text-align: center;
      color: white;
    }
    .container {
      padding: 20px;
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .filters label {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .restaurant {
      background-color: white;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
    }
    .restaurant h3 {
      margin: 0;
    }
    .button {
      background-color: #d4af37;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    #favorites {
      display: none;
      margin-top: 20px;
    }
    #map {
      height: 300px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üç∫ Restaurant Finder</h1>
  </header>
  <div class="container">
    <div class="filters">
      <label>üìç Radius (km): <input type="number" id="radius" value="2" min="0.1" step="0.1"></label>
      <label>üç∫ Beer Type: <input type="text" id="beer" placeholder="e.g. Pilsner Urquell"></label>
      <label>üçΩÔ∏è Cuisine: <input type="text" id="cuisine" placeholder="e.g. Czech"></label>
    </div>
    <button class="button" onclick="findRestaurants()">Search</button>
    <div id="map"></div>
    <div id="results"></div>
    <button class="button" onclick="loadMore()">Show More</button>
    <button class="button" onclick="toggleFavorites()">‚ù§Ô∏è Show Favorites</button>
    <div id="favorites"></div>
  </div>

  <script>
    let allRestaurants = [];
    let currentIndex = 0;
    let userLat = 0;
    let userLon = 0;

    function toggleFavorites() {
      const favDiv = document.getElementById("favorites");
      favDiv.style.display = favDiv.style.display === "none" ? "block" : "none";
      displayFavorites();
    }

    function displayFavorites() {
      const favDiv = document.getElementById("favorites");
      favDiv.innerHTML = "<h2>Favorites</h2>";
      const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
      favorites.forEach((r, index) => {
        favDiv.innerHTML += `
          <div class="restaurant">
            <h3>${r.name}</h3>
            <p>${r.address}</p>
            <button class="button" onclick="navigateTo(${r.lat}, ${r.lon})">Navigate</button>
            <button class="button" onclick="removeFavorite(${index})">Remove Favorite</button>
          </div>
        `;
      });
    }

    function removeFavorite(index) {
      const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
      favorites.splice(index, 1);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      displayFavorites();
    }

    function saveFavorite(restaurant) {
      const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
      favorites.push(restaurant);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      alert("Added to favorites!");
    }

    function navigateTo(lat, lon) {
      window.open(`https://www.google.com/maps/dir/?api=1&destination=${lat},${lon}`, "_blank");
    }

    function loadMore() {
      const resultsDiv = document.getElementById("results");
      for (let i = currentIndex; i < currentIndex + 10 && i < allRestaurants.length; i++) {
        const r = allRestaurants[i];
        resultsDiv.innerHTML += `
          <div class="restaurant">
            <h3>${r.name}</h3>
            <p>${r.address}</p>
            <button class="button" onclick="navigateTo(${r.lat}, ${r.lon})">Navigate</button>
            <button class="button" onclick='saveFavorite(${JSON.stringify(r)})'>Add to Favorites</button>
          </div>
        `;
      }
      currentIndex += 10;
    }

    function findRestaurants() {
      const radiusKm = parseFloat(document.getElementById('radius').value);
      const beer = document.getElementById('beer').value.toLowerCase();
      const cuisine = document.getElementById('cuisine').value.toLowerCase();

      navigator.geolocation.getCurrentPosition(async (position) => {
        userLat = position.coords.latitude;
        userLon = position.coords.longitude;
        const radiusMeters = radiusKm * 1000;

        // Simulated data for demonstration
        allRestaurants = [];
        for (let i = 1; i <= 100; i++) {
          allRestaurants.push({
            name: `Restaurant ${i} ${beer ? '- ' + beer : ''}`,
            address: `Street ${i}, City`,
            lat: userLat + (Math.random() - 0.5) * 0.01,
            lon: userLon + (Math.random() - 0.5) * 0.01
          });
        }

        currentIndex = 0;
        document.getElementById("results").innerHTML = "";
        loadMore();
        showMap();
      });
    }

    function showMap() {
      const mapDiv = document.getElementById("map");
      mapDiv.innerHTML = "<p>Map would be displayed here (Leaflet.js integration required).</p>";
    }
  </script>
</body>
</html>
